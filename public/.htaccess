
Options -MultiViews -Indexes
FileETag None

Redirect 301 /index.html /

<IfModule mod_setenvif.c>
	<IfModule mod_headers.c>
		<FilesMatch "\.(bmp|cur|gif|ico|jpe?g|png|svgz?|webp)$">
			SetEnvIf Origin ":" IS_CORS
			Header set Access-Control-Allow-Origin "*" env=IS_CORS
		</FilesMatch>
		<FilesMatch "\.(eot|otf|tt[cf]|woff2?)$">
			Header set Access-Control-Allow-Origin "*"
		</FilesMatch>
	</IfModule>
</IfModule>

<IfModule mod_headers.c>
	Header add Link "</css/public.min.css>;rel=preload;as=style"

	# Header add Link "</css/fonts/Roboto-Regular-Latin.woff2>;rel=preload, </css/fonts/Roboto-Bold-Latin.woff2>;rel=preload"
	Header add Link "</css/fonts/Roboto-Regular-Latin.woff2>;rel=preload;as=font, </css/fonts/Roboto-Bold-Latin.woff2>;rel=preload;as=font"

	# Header add Link "</css/public.min.css>;rel=preload, </assets/scripts.css>;rel=preload"
	# Header add Link "</img/icons/32/attribute-1.png>;rel=preload;as=image,</img/icons/32/attribute-2.png>;rel=preload;as=image,</img/icons/32/attribute-3.png>;rel=preload;as=image,</img/icons/32/attribute-4.png>;rel=preload;as=image,</img/icons/32/attribute-5.png>;rel=preload;as=image,</img/icons/32/attribute-6.png>;rel=preload;as=image,</img/icons/32/icon-1-border.png>;rel=preload;as=image,</img/icons/32/icon-1.png>;rel=preload;as=image,</img/icons/32/icon-101-border.png>;rel=preload;as=image,</img/icons/32/icon-101.png>;rel=preload;as=image,</img/icons/32/icon-102-border.png>;rel=preload;as=image,</img/icons/32/icon-102.png>;rel=preload;as=image,</img/icons/32/icon-103-border.png>;rel=preload;as=image,</img/icons/32/icon-103.png>;rel=preload;as=image,</img/icons/32/icon-104-border.png>;rel=preload;as=image,</img/icons/32/icon-104.png>;rel=preload;as=image,</img/icons/32/icon-105-border.png>;rel=preload;as=image,</img/icons/32/icon-105.png>;rel=preload;as=image,</img/icons/32/icon-106-border.png>;rel=preload;as=image,</img/icons/32/icon-106.png>;rel=preload;as=image,</img/icons/32/icon-107-border.png>;rel=preload;as=image,</img/icons/32/icon-107.png>;rel=preload;as=image,</img/icons/32/icon-108-border.png>;rel=preload;as=image,</img/icons/32/icon-108.png>;rel=preload;as=image,</img/icons/32/icon-109-border.png>;rel=preload;as=image,</img/icons/32/icon-109.png>;rel=preload;as=image,</img/icons/32/icon-2-border.png>;rel=preload;as=image,</img/icons/32/icon-2.png>;rel=preload;as=image,</img/icons/32/icon-201-border.png>;rel=preload;as=image,</img/icons/32/icon-201.png>;rel=preload;as=image,</img/icons/32/icon-202-border.png>;rel=preload;as=image,</img/icons/32/icon-202.png>;rel=preload;as=image,</img/icons/32/icon-203-border.png>;rel=preload;as=image,</img/icons/32/icon-203.png>;rel=preload;as=image,</img/icons/32/icon-204-border.png>;rel=preload;as=image,</img/icons/32/icon-204.png>;rel=preload;as=image,</img/icons/32/icon-205-border.png>;rel=preload;as=image,</img/icons/32/icon-205.png>;rel=preload;as=image,</img/icons/32/icon-206-border.png>;rel=preload;as=image,</img/icons/32/icon-206.png>;rel=preload;as=image,</img/icons/32/icon-207-border.png>;rel=preload;as=image,</img/icons/32/icon-207.png>;rel=preload;as=image,</img/icons/32/icon-208-border.png>;rel=preload;as=image,</img/icons/32/icon-208.png>;rel=preload;as=image,</img/icons/32/icon-209-border.png>;rel=preload;as=image,</img/icons/32/icon-209.png>;rel=preload;as=image,</img/icons/32/icon-210-border.png>;rel=preload;as=image,</img/icons/32/icon-210.png>;rel=preload;as=image,</img/icons/32/icon-211-border.png>;rel=preload;as=image,</img/icons/32/icon-211.png>;rel=preload;as=image,</img/icons/32/icon-212-border.png>;rel=preload;as=image,</img/icons/32/icon-212.png>;rel=preload;as=image,</img/icons/32/icon-3-border.png>;rel=preload;as=image,</img/icons/32/icon-3.png>;rel=preload;as=image,</img/icons/32/icon-301-border.png>;rel=preload;as=image,</img/icons/32/icon-301.png>;rel=preload;as=image,</img/icons/32/icon-302-border.png>;rel=preload;as=image,</img/icons/32/icon-302.png>;rel=preload;as=image,</img/icons/32/icon-303-border.png>;rel=preload;as=image,</img/icons/32/icon-303.png>;rel=preload;as=image,</img/icons/32/icon-304-border.png>;rel=preload;as=image,</img/icons/32/icon-304.png>;rel=preload;as=image,</img/icons/32/icon-305-border.png>;rel=preload;as=image,</img/icons/32/icon-305.png>;rel=preload;as=image,</img/icons/32/icon-4-border.png>;rel=preload;as=image,</img/icons/32/icon-4.png>;rel=preload;as=image,</img/icons/32/icon-5-border.png>;rel=preload;as=image,</img/icons/32/icon-5.png>;rel=preload;as=image,</img/icons/32/icon-6-border.png>;rel=preload;as=image,</img/icons/32/icon-6.png>;rel=preload;as=image,</img/icons/32/icon-7-border.png>;rel=preload;as=image,</img/icons/32/icon-7.png>;rel=preload;as=image,</img/icons/32/icon-8-border.png>;rel=preload;as=image,</img/icons/32/icon-8.png>;rel=preload;as=image,</img/icons/32/icon-9-border.png>;rel=preload;as=image,</img/icons/32/icon-9.png>;rel=preload;as=image,</img/icons/32/rarity-10.png>;rel=preload;as=image,</img/icons/32/rarity-20.png>;rel=preload;as=image,</img/icons/32/rarity-30.png>;rel=preload;as=image,</img/icons/32/type-1.png>;rel=preload;as=image,</img/icons/32/type-2.png>;rel=preload;as=image,</img/icons/32/type-3.png>;rel=preload;as=image,</img/icons/32/type-4.png>;rel=preload;as=image"

	# Header add Link "</img/thumbnails/atlas_1_30_0_idolized.png>;rel=preload;as=image;media=screen and (min-width: 1101px)"
	# Header add Link "</img/thumbnails/atlas_1_30_0_normal.png>;rel=preload;as=image;media=screen and (min-width: 1101px)"
	# Header add Link "</img/thumbnails/atlas_2_30_0_idolized.png>;rel=preload;as=image;media=screen and (min-width: 1101px)"
	# Header add Link "</img/thumbnails/atlas_2_30_0_normal.png>;rel=preload;as=image;media=screen and (min-width: 1101px)"
	# Header add Link "</img/thumbnails/atlas_3_30_0_idolized.png>;rel=preload;as=image;media=screen and (min-width: 1101px)"
	# Header add Link "</img/thumbnails/atlas_3_30_0_normal.png>;rel=preload;as=image;media=screen and (min-width: 1101px)"

	Header add Link "</img/background.jpg>;rel=preload;as=image;media=screen and (min-width: 1101px)"
	Header add Link "</img/background-mobile.jpg>;rel=preload;as=image;media=screen and (max-width: 1100px)"


	Header set X-Best-Girl "Nozomi"
	
	Header set Access-Control-Allow-Origin "*"
	
	Header set Expect-CT "max-age=0"
	Header set Feature-Policy "vibrate 'none'; geolocation 'none'; microphone 'none' "
	Header set Permissions-Policy "vibrate=(), geolocation=(), microphone=(), interest-cohort=()"
	
	Header set X-Content-Type-Options "nosniff"
	Header add X-Robots-Tag "noindex"
	
	Header unset X-Powered-By
	Header unset ETag
	
	Header set X-UA-Compatible "IE=edge"
	<FilesMatch "\.(appcache|atom|bbaw|bmp|br|crx|css|cur|eot|f4[abpv]|flv|geojson|gif|gz|htc|ic[os]|jpe?g|m?js|json(ld)?|m4[av]|manifest|map|markdown|md|mp4|oex|og[agv]|opus|otf|pdf|png|rdf|rss|safariextz|svgz?|swf|topojson|tt[cf]|txt|vcard|vcf|vtt|wasm|webapp|web[mp]|webmanifest|woff2?|xloc|xml|xpi)$">
		Header unset X-UA-Compatible
	</FilesMatch> 
	
	Header set Referrer-Policy "no-referrer-when-downgrade"
	<FilesMatch "\.(appcache|atom|bbaw|bmp|br|crx|css|cur|eot|f4[abpv]|flv|geojson|gif|gz|htc|ic[os]|jpe?g|m?js|json(ld)?|m4[av]|manifest|map|markdown|md|mp4|oex|og[agv]|opus|otf|pdf|png|rdf|rss|safariextz|svgz?|swf|topojson|tt[cf]|txt|vcard|vcf|vtt|wasm|webapp|web[mp]|webmanifest|woff2?|xloc|xml|xpi)$">
		Header unset Referrer-Policy
	</FilesMatch>
</IfModule>

<IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteCond %{REQUEST_URI} "!(^|/)\.well-known/([^./]+./?)+$" [NC]
	RewriteCond %{SCRIPT_FILENAME} -d [OR]
	RewriteCond %{SCRIPT_FILENAME} -f
	RewriteRule "(^|/)\." - [F]
	
	# Removes cache busting token from resource files
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^(css|js)/(.+)\.([a-z0-9]{6})\.(bmp|css|cur|gif|ico|jpe?g|m?js|png|svgz?|webp|webmanifest)$ $1/$2.$4 [L]
	RewriteRule ^(img/thumbnails)/(.+)\.([a-z0-9]{6})\.(bmp|css|cur|gif|ico|jpe?g|m?js|png|svgz?|webp|webmanifest)$ $1/$2.$4 [L]
	
	RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
	RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,NE,L]
</IfModule>

<IfModule mod_authz_core.c>
	<FilesMatch "(^#.*#|\.(bak|conf|dist|fla|in[ci]|log|orig|psd|sh|sql|sw[op])|~)$">
		Require all denied
	</FilesMatch>
</IfModule>

<IfModule mod_deflate.c>
	<FilesMatch "\.(html?|txt|css|js|php|pl)$">
		SetOutputFilter DEFLATE
	</FilesMatch>
</IfModule>

<IfModule mod_expires.c>

	ExpiresActive on
	ExpiresDefault                                      "access plus 1 month"

  # CSS

	ExpiresByType text/css                              "access plus 1 year"


  # Data interchange

	ExpiresByType application/atom+xml                  "access plus 1 hour"
	ExpiresByType application/rdf+xml                   "access plus 1 hour"
	ExpiresByType application/rss+xml                   "access plus 1 hour"

	ExpiresByType application/json                      "access plus 0 seconds"
	ExpiresByType application/ld+json                   "access plus 0 seconds"
	ExpiresByType application/schema+json               "access plus 0 seconds"
	ExpiresByType application/vnd.geo+json              "access plus 0 seconds"
	ExpiresByType application/xml                       "access plus 0 seconds"
	ExpiresByType text/calendar                         "access plus 0 seconds"
	ExpiresByType text/xml                              "access plus 0 seconds"


  # Favicon (cannot be renamed!) and cursor images

	ExpiresByType image/vnd.microsoft.icon              "access plus 1 week"
	ExpiresByType image/x-icon                          "access plus 1 week"

  # HTML

	ExpiresByType text/html                             "access plus 0 seconds"


  # JavaScript

	ExpiresByType application/javascript                "access plus 1 year"
	ExpiresByType application/x-javascript              "access plus 1 year"
	ExpiresByType text/javascript                       "access plus 1 year"


  # Manifest files

	ExpiresByType application/manifest+json             "access plus 1 week"
	ExpiresByType application/x-web-app-manifest+json   "access plus 0 seconds"
	ExpiresByType text/cache-manifest                   "access plus 0 seconds"


  # Markdown

	ExpiresByType text/markdown                         "access plus 0 seconds"


  # Media files

	ExpiresByType audio/ogg                             "access plus 1 month"
	ExpiresByType audio/mpeg                            "access plus 1 month"
	ExpiresByType image/bmp                             "access plus 1 year"
	ExpiresByType image/gif                             "access plus 1 year"
	ExpiresByType image/jpeg                            "access plus 1 year"
	ExpiresByType image/png                             "access plus 1 year"
	ExpiresByType image/svg+xml                         "access plus 1 year"
	ExpiresByType image/webp                            "access plus 1 year"
	ExpiresByType video/mp4                             "access plus 1 month"
	ExpiresByType video/ogg                             "access plus 1 month"
	ExpiresByType video/webm                            "access plus 1 month"


  # WebAssembly

	ExpiresByType application/wasm                      "access plus 1 year"


  # Web fonts

	# Collection
	ExpiresByType font/collection                       "access plus 1 year"

	# Embedded OpenType (EOT)
	ExpiresByType application/vnd.ms-fontobject         "access plus 1 year"
	ExpiresByType font/eot                              "access plus 1 year"

	# OpenType
	ExpiresByType font/opentype                         "access plus 1 year"
	ExpiresByType font/otf                              "access plus 1 year"

	# TrueType
	ExpiresByType application/x-font-ttf                "access plus 1 year"
	ExpiresByType font/ttf                              "access plus 1 year"

	# Web Open Font Format (WOFF) 1.0
	ExpiresByType application/font-woff                 "access plus 1 year"
	ExpiresByType application/x-font-woff               "access plus 1 year"
	ExpiresByType font/woff                             "access plus 1 year"

	# Web Open Font Format (WOFF) 2.0
	ExpiresByType application/font-woff2                "access plus 1 year"
	ExpiresByType font/woff2                            "access plus 1 year"


  # Other

	ExpiresByType text/x-cross-domain-policy            "access plus 1 week"

</IfModule>
