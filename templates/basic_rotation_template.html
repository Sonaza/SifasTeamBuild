<h1>{{ page_title }}</h1>
<p>{{ page_description }}</p>
<div class="rotation-column-wrapper">
	{% for group, group_data in grouped_rotations %}
		<div class="rotation-column">
			{% for card_rotation, rotation_title in group_data: %}
				<div class="rotation-group {{ group.tag }}">
					<div class="rotation-title">
						<div class="set-index">
							{{ ordinalize(loop.index) }} {{ group.displayname }} {{ set_label if set_label else 'Rotation' }}
						</div>
						{% if rotation_title %}
							<div class="set-title">
								<span class="bullshit-centering">{{ rotation_title }}</span>
							</div>
						{% endif %}
					</div>
					<div class="card-grid">
						{% if not card_rotation %}
							<h1>No cards!</h1>
						{% endif %}
						{% for member_id, card in card_rotation %}
							<div class="grid-icon-wrapper idol-{{ member_id.value }}">
								{% if is_valid_card(card) %}
									<div class="grid-icon idol-icon-32 idol-bg-color-dark idol-bg-glow-border tooltip-data"
										data-member-id="{{ member_id.value }}"
										data-member-name="{{ member_id.full_name }}"
										data-card-status="1"
										data-card-attribute="{{ card.attribute.value }}"
										data-card-type="{{ card.type.value }}"
										data-card-title-normal="{{ card.get_card_name(False) }}"
										data-card-title-idolized="{{ card.get_card_name(True) }}"
										data-card-source="{{ card.source.displayname }}"
										data-card-release-date="{{ card.release_date.strftime('%d %B %Y') }}"
										ng-mouseover="toggleTooltip($event, true)"
										ng-mouseleave="toggleTooltip($event, false)">
										<a href="https://allstars.kirara.ca/card/{{ card.ordinal }}" target="_blank">
											<span class="card-thumbnail group-{{ card.group_id.value }}-{{ card.rarity.value }} card-{{ card.ordinal }}">
												<span class="source-indicator source-{{ card.source.value }}"></span>
											</span>
										</a>
									</div>
								{% else %}
									{% if is_missing_card(card) %}
										<div class="grid-icon idol-icon-32 idol-bg-color-dark idol-bg-glow-border missing tooltip-data"
											data-member-id="{{ member_id.value }}"
											data-member-name="{{ member_id.full_name }}"
											data-card-status="2"
											ng-mouseover="toggleTooltip($event, true)"
											ng-mouseleave="toggleTooltip($event, false)">
											<span class="source-indicator"></span>
										</div>
									{% elif is_nonextant_card(card) %}
										<div class="grid-icon idol-icon-32 idol-bg-color-dark idol-bg-glow-border non-extant tooltip-data"
											data-member-id="{{ member_id.value }}"
											data-member-name="{{ member_id.full_name }}"
											data-card-status="3"
											ng-mouseover="toggleTooltip($event, true)"
											ng-mouseleave="toggleTooltip($event, false)">
											<div>N/A</div>
										</div>
									{% endif %}
								{% endif %}
							</div>
						{% endfor %}
					</div>
				</div>
			{% endfor %}
		</div>
	{% endfor %}
</div>
<div id="card-tooltip" data-card-tooltip="tooltip_data"></div>
