<ul class="array-group-page-selector">
	<li><a href="#/stats/general"   ng-class="pageActive('general')">General</a></li>
	<li><a href="#/stats/event"     ng-class="pageActive('event')">Event URs</a></li>
	<li><a href="#/stats/festival"  ng-class="pageActive('festival')">Festival URs</a></li>
	<li><a href="#/stats/party"     ng-class="pageActive('party')">Party URs</a></li>
	<li><a href="#/stats/limited"   ng-class="pageActive('limited')">Festival + Party</a></li>
	<li><a href="#/stats/spotlight" ng-class="pageActive('spotlight')">Party + Spotlight</a></li>
	<li><a href="#/stats/gacha"     ng-class="pageActive('gacha')">Any Gacha UR</a></li>
	<li><a href="#/stats/ur"        ng-class="pageActive('ur')">Any UR</a></li>
	<li><a href="#/stats/sr"        ng-class="pageActive('sr')">Any SR</a></li>
</ul>

<div class="stats-category general" ng-if="isActive('general')">
	<h2>General Stats</h2>
	<p>Numbers of different types of cards.</p>
	{% for group, data in general_stats.items() %}
		<div class="stats-category-group {{ GroupInfo[group].tag }}">
			<table class="stats-table general wide">
				<colgroup>
					<col style="width: 38px">
					<col style="width: 24%">
					
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					
					<col style="width: 15%">
					<col style="width: 15%">
					<col style="width: 15%">
					<col style="width: 15%">
				</colgroup>
				<thead>
					<tr>
						<th colspan="2">{{ GroupInfo[group].name }} Members</th>
						
						<th>URs</th>
						<th>SRs</th>
						
						<th>Festival</th>
						<th>Party</th>
						<th>Event</th>
						<th>Gacha</th>
					</tr>
				</thead>
				<tbody>
					{% for member, stats in data %}
						<tr class="idol-{{ member.value }}">
							<td class="idol-icon idol-icon-32-border idol-bg-color-dim"></td>
							<td>{{ Idols.by_member_id[member].full_name }}</td>
							
							<td class="stat-number">{{ stats['URs'] }}</td>
							<td class="stat-number">{{ stats['SRs'] }}</td>
							
							<td class="stat-number">{{ stats['festival'] }}</td>
							<td class="stat-number">{{ stats['party'] }}</td>
							<td class="stat-number">{{ stats['event'] }}</td>
							<td class="stat-number">{{ stats['gacha'] }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
			
			<table class="stats-table general wide">
				<colgroup>
					<col style="width: 38px">
					<col style="width: 24%">
					
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					<col style="width: 7.5%">
					
					{# <col style="width: 47%">
					<col style="width: 33%"> #}
				</colgroup>
				<thead>
					<tr>
						<th colspan="2">{{ GroupInfo[group].name }} Members</th>
						<th colspan="6">Attributes</th>
						<th colspan="4">Types</th>
					</tr>
				</thead>
				<tbody>
					{% for member, stats in data %}
						<tr class="idol-{{ member.value }}">
							<td class="idol-icon idol-icon-32-border idol-bg-color-dim"></td>
							<td>{{ Idols.by_member_id[member].full_name }}</td>
							
							{% for attribute in Attribute %}
								<td class="stat-various {{ 'has-none' if stats['attributes'][attribute] == 0 else '' }} attribute-{{ attribute.value }} attribute-bg-color-dim">
									<span class="icon-32 attribute-{{ attribute.value }}">{{ stats['attributes'][attribute] }}</span>
								</td>
							{% endfor %}
							{% for type in Type %}
								<td class="stat-various {{ 'has-none' if stats['types'][type] == 0 else '' }} type-{{ type.value }} type-bg-color-dim">
									<span class="icon-32 type-{{ type.value }}">{{ stats['types'][type] }}</span>
								</td>
							{% endfor %}
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	{% endfor %}
</div>
	
{% for category_tag, category_data in card_stats.items() %}
	<div class="stats-category {{ category_tag }}" ng-if="isActive('{{ category_tag }}')">
		<h2>{{ categories[category_tag][0] }}</h2>
		<p>{{ categories[category_tag][1] }}</p>
		{% for group, data in category_data.items() %}
			<div class="stats-category-group {{ GroupInfo[group].tag }}">
				{# <h2>{{ GroupInfo[group].name }}</h2> #}
				<table class="stats-table {{ 'with-source' if data.show_source else '' }}">
					<colgroup>
						<col style="width: 38px">
						<col style="width: 24%">
						<col style="width: 24%">
						<col style="width: 38px">
						{% if data.show_source %}
							<col style="width: 40%">
							<col style="width: 13%">
						{% else %}
							<col style="width: 52%">
						{% endif %}
					</colgroup>
					<thead>
						<tr>
							<th colspan="2">{{ GroupInfo[group].name }} Members</th>
							<th colspan="4">Most Recent Card</th>
						</tr>
					</thead>
					<tbody>
						{% for member, card, time_since in data.cards %}
							<tr class="idol-{{ member.value }}">
								<td class="idol-icon idol-icon-32-border idol-bg-color-dim"></td>
								<td>{{ Idols.by_member_id[member].full_name }}</td>
								{% if is_valid_card(card) %}
									<td>
										{% if time_since.days > 0 %}
											{{ time_since.days | days("ago") }}
										{% elif time_since.days == 0: %}
											Today
										{% else %}
											Will release in {{ time_since.days | days }}
										{% endif %}
									</td>
									<td class="thumbnail">
										<div class="thumbnail-wrapper">
											<a href="https://allstars.kirara.ca/card/{{ card.ordinal }}" target="_blank" class="card-thumbnail group-{{ card.group_id.value }}-{{ card.rarity.value }} card-{{ card.ordinal }}"></a>
										</div>
									</td>
									<td class="card-link"
										{% if not data.show_source %}
											colspan="2"
										{% endif %}>
										{# <a href="https://allstars.kirara.ca/card/{{ card.ordinal }}" class="card-link-normal" target="_blank">{{ card.get_card_name(False) }}</a> #}
										<a href="https://allstars.kirara.ca/card/{{ card.ordinal }}" class="card-link-idolized" target="_blank">{{ card.get_card_name(True) }}</a>
									</td>
									{% if data.show_source %}
										<td class="card-source">
											{{ card.source.name }}
										</td>
									{% endif %}
								{% else %} 
									<td>
										Never
									</td>
									<td colspan="3" style="color: #aaa;">
										&mdash;
									</td>
								{% endif %}
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		{% endfor %}
	</div>
{% endfor %}
